Lavender.Observer=function(){this.chain;this.Update=function(){return}};Lavender.Binder=function(){this.bindingGroups={}};Lavender.Binder.prototype.bind=function(host,hostProp,chain,chainProp,isCSS,cssProperty,group){var changeWatcher=Lavender.BindingUtils.bind(host,hostProp,chain,chainProp,isCSS,cssProperty);var groupToBind=group||"default";if(!this.bindingGroups.hasOwnProperty(groupToBind)){this.bindingGroups[groupToBind]=[]}this.bindingGroups[groupToBind].push({host:host,watcher:changeWatcher})};Lavender.Binder.prototype.unbind=function(group){var groupToUnbind=group||"default";var bindings=this.bindingGroups[groupToUnbind];if(bindings){bindings.forEach(function(bindingData){bindingData.host.RemoveObserver(bindingData.watcher)});delete this.bindingGroups[groupToUnbind]}};Lavender.Binder.prototype.unbindAll=function(){for(var group in this.bindingGroups){this.unbind(group)}};Lavender.Subject=function(){this.observerHash={};this.binder=new Lavender.Binder};Lavender.Subject.prototype.getCss=function(useSvg,preserveNonMatchingAttributes){if(useSvg===null||useSvg===undefined){useSvg=false}if(preserveNonMatchingAttributes===null||preserveNonMatchingAttributes===undefined){preserveNonMatchingAttributes=false}var returnCss=Lavender.CSSUtils.getObjectCss(this,useSvg,preserveNonMatchingAttributes);return returnCss};Lavender.Subject.prototype.Notify=function(value,chain){if(this.observerHash[chain]==null||this.observerHash[chain]==undefined){return}var m_count=this.observerHash[chain].length();for(var i=0;i<m_count;i++){this.observerHash[chain].getItemAt(i).Update(value,chain)}};Lavender.Subject.prototype.AddObserver=function(observer){if(!observer.Update||!observer.chain){throw"Wrong parameter"}if(this.observerHash[observer.chain]==null||this.observerHash[observer.chain]==undefined){this.observerHash[observer.chain]=new Lavender.ArrayList}this.observerHash[observer.chain].addItem(observer)};Lavender.Subject.prototype.RemoveObserver=function(observer){if(!observer.Update||!observer.chain)throw"Wrong parameter";if(this.observerHash[observer.chain]==null||this.observerHash[observer.chain]==undefined){throw"Lavender.Subject.prototype.RemoveObserver: Property not found in registered observers"}this.observerHash[observer.chain].removeItemAt(this.observerHash[observer.chain].indexOf(observer,0))};Lavender.Subject.prototype.addProperty=function(label,getter,setter){if(Object.defineProperty){try{Object.defineProperty(this,label,{get:getter,set:setter,enumerable:true})}catch(e){}}else if(this.__defineGetter__){if(getter){this.__defineGetter__(label,getter)}if(setter){this.__defineSetter__(label,setter)}}};Lavender.Subject.prototype.addProperties=function(p){for(var label in p){if(p.hasOwnProperty(label)){this.addProperty(label,p[label].get,p[label].set)}}};Lavender.ChangeWatcher=function(hostProp,chainInstance,chainPropToWatch,isCSS,cssProperty){this.chain=hostProp;this.instance=chainInstance;this.chainProp=chainPropToWatch;this.isCSS=isCSS;this.cssProperty=cssProperty;this.Update=function(value,chain){if(this.isCSS){this.instance[this.chainProp](this.cssProperty,value)}else if(typeof this.instance[this.chainProp]=="function"){this.instance[this.chainProp](value,chain)}else{if(this.instance[this.chainProp]!=value){this.instance[this.chainProp]=value}}}};Lavender.ChangeWatcher.prototype=new Lavender.Observer;Lavender.BindingUtils=function(){};Lavender.BindingUtils.bind=function(host,hostProp,chain,chainProp,isCSS,cssProperty){if(isCSS===undefined||isCSS===null){isCSS=false}var changeWatcher=new Lavender.ChangeWatcher(hostProp,chain,chainProp,isCSS,cssProperty);host.AddObserver(changeWatcher);return changeWatcher};Lavender.ObjectUtils=function(){};Lavender.ObjectUtils.extend=function(base,sub){sub.prototype=Object.create(base.prototype);sub.prototype.constructor=sub};Lavender.ObjectUtils.mixin=function(base,sub,subInstance,overwriteInstanceVariables){if(overwriteInstanceVariables===null||overwriteInstanceVariables===undefined){overwriteInstanceVariables=false}var objectToExtend=new base;for(var prop in base.prototype){if(base.prototype.hasOwnProperty(prop)){sub.prototype[prop]=base.prototype[prop]}}for(var prop in objectToExtend){if(objectToExtend.hasOwnProperty(prop)){if(subInstance[prop]!==null&&subInstance[prop]!==undefined&&!overwriteInstanceVariables){continue}subInstance[prop]=objectToExtend[prop]}}return subInstance};Lavender.ObjectUtils.hasFunction=function(obj,prop){return obj&&typeof obj[prop]==="function"};Lavender.ObjectUtils.copy=function(obj){return jQuery.extend(true,{},obj)};Lavender.ObjectUtils.getBooleanAttr=function(elem,attr){var value=elem.attr(attr);if(value==null||value==undefined){return value}return Boolean(elem.attr(attr)=="true"?true:false)};Lavender.ObjectUtils.plugInJQuery=function($,pluginName,functionConstructor){$.fn[pluginName]=function(options){var jQueryInstance=this;return this.each(function(){new functionConstructor(this,options,jQueryInstance)})};$.fn[pluginName].Constructor=functionConstructor;$[functionConstructor]=functionConstructor};Lavender.ObjectUtils.isPropDefined=function(obj,prop){if(obj&&obj.hasOwnProperty(prop)&&obj[prop]!=undefined&&obj[prop]!=null&&obj[prop]!=NaN){return true}return false};Lavender.TransformUtils=function(){};Lavender.TransformUtils.calculateMovement=function(originalState,delta){if(!delta){return null}var deltaX=delta.x||0;var deltaY=delta.y||0;var res=null;if(originalState.hasOwnProperty("left")&&originalState.hasOwnProperty("top")){res={geometry:new Lavender.Geometry({left:originalState.left+deltaX,top:originalState.top+deltaY})}}else if(originalState.hasOwnProperty("left")){res={left:originalState.left+deltaX}}else if(originalState.hasOwnProperty("top")){res={top:originalState.top+deltaY}}return res};Lavender.TransformUtils.calculateResizeAroundAnchorPoint=function(originalState,sizeDelta,anchorPos,proportionalResizer){var dWidth=sizeDelta.width||0;var dHeight=sizeDelta.height||0;anchorPos=anchorPos||Lavender.TransformUtils.getDefaultAnchorPos();if(!originalState.hasOwnProperty("width")||!originalState.hasOwnProperty("height")||!originalState.hasOwnProperty("top")||!originalState.hasOwnProperty("left")||!dWidth&&!dHeight){return null}var geometry=new Lavender.Geometry({width:originalState.width+dWidth,height:originalState.height+dHeight});if(proportionalResizer){proportionalResizer.applyConstraint(originalState,null,geometry,anchorPos)}var pos=this.getPosAfterResizeAroundAnchorPoint(originalState,geometry,anchorPos);if(pos){geometry.update(pos)}return{geometry:geometry}};Lavender.TransformUtils.calculateRotate=function(originalState,deltaAngle){if(!deltaAngle){return null}var res=null;if(originalState.hasOwnProperty("rotation")){res={rotation:originalState.rotation+deltaAngle}}return res};Lavender.TransformUtils.getPosAfterResizeAroundAnchorPoint=function(originalState,sizeAfterTransform,anchorPos){if(!originalState.hasOwnProperty("width")||!originalState.hasOwnProperty("height")){return null}var dWidth=sizeAfterTransform.hasOwnProperty("width")?sizeAfterTransform.width-originalState.width:0;var dHeight=sizeAfterTransform.hasOwnProperty("height")?sizeAfterTransform.height-originalState.height:0;anchorPos=anchorPos||Lavender.TransformUtils.getDefaultAnchorPos();if(!dWidth&&!dHeight){return null}var posOffset=new Point(dWidth*anchorPos.x,dHeight*anchorPos.y);if(originalState.hasOwnProperty("rotation")&&originalState.rotation){var originalCenterPoint=new Point(originalState.width/2,originalState.height/2);var newCenterPoint=new Point(posOffset.x+(originalState.width+dWidth)/2,posOffset.y+(originalState.height+dHeight)/2);var rotMatrix=new Matrix;rotMatrix=Lavender.MatrixUtils.rotate(rotMatrix,originalState.rotation,originalCenterPoint);var rotPosOffset=rotMatrix.transformPoint(posOffset);var rotNewCenterPoint=rotMatrix.transformPoint(newCenterPoint);var unrotMatrix=new Matrix;unrotMatrix=Lavender.MatrixUtils.rotate(unrotMatrix,-originalState.rotation,rotNewCenterPoint);posOffset=unrotMatrix.transformPoint(rotPosOffset)}var pos={left:originalState.left+posOffset.x,top:originalState.top+posOffset.y};return pos};Lavender.TransformUtils.getDefaultAnchorPos=function(){return new Point(-.5,-.5)};Lavender.TransformUtils.applyConstraints=function(originalState,currentState,stateAfterTransform,anchorPos,constraints){if(constraints){constraints.forEach(function(constraint){constraint.applyConstraint(originalState,currentState,stateAfterTransform,anchorPos)})}};Lavender.TransformUtils.applyTransform=function(obj,stateAfterTransform){if(!stateAfterTransform){return}for(var prop in stateAfterTransform){if(stateAfterTransform.hasOwnProperty(prop)&&obj.hasOwnProperty(prop)){obj[prop]=stateAfterTransform[prop]}}};Lavender.CopyUtils=function(){};Lavender.CopyUtils.copyInhertiedValues=function(child,parent){for(var prop in parent){if(child.hasOwnProperty(prop)&&(child[prop]===undefined||child[prop]===null||child[prop]===""||child[prop]===NaN)){child[prop]=parent[prop]}}};Lavender.CopyUtils.overwriteValues=function(child,parent,excludeObjects){if(excludeObjects==null||excludeObjects==undefined){excludeObjects={}}for(var prop in parent){if(child.hasOwnProperty(prop)){var value=excludeObjects.hasOwnProperty(prop)?child[prop]:parent[prop];child[prop]=value}}};Lavender.CopyUtils.concatObjects=function(){var ret={};var len=arguments.length;for(var i=0;i<len;i++){for(var p in arguments[i]){if(arguments[i].hasOwnProperty(p)){ret[p]=arguments[i][p]}}}return ret};Lavender.CopyUtils.copyProperties=function(target,source){for(var prop in source){if(typeof source[prop]!=="function"){target[prop]=source[prop]}}};Lavender.MathUtils=function(){};Lavender.MathUtils.degreeToRadian=function(degAngle){return degAngle*Math.PI/180};Lavender.MathUtils.radianToDegree=function(radAngle){return radAngle*180/Math.PI};Lavender.MathUtils.toFixed=function(number,precision){precision=precision||10;var multiplier=Math.pow(10,precision);return Math.round(number*multiplier)/multiplier};Lavender.MathUtils.isEven=function(value){return value%2==0};Lavender.MatrixUtils=function(){};Lavender.MatrixUtils.rotate=function(matrix,degAngle,point){return matrix.rotate(Lavender.MathUtils.degreeToRadian(degAngle),point)};Lavender.MatrixUtils.matrixToCSS=function(matrix){var coeffs=["a","b","c","d","tx","ty"];var values=[];for(var i in coeffs){values.push(Lavender.MathUtils.toFixed(matrix[coeffs[i]]))}return"matrix("+values.join(",")+")"};Lavender.MatrixUtils.getRotationAngleForElement=function(element){var matrix=element.css("-webkit-transform")||element.css("-moz-transform")||element.css("-ms-transform")||element.css("-o-transform")||element.css("transform");var angle;if(matrix!=="none"){var values=matrix.split("(")[1].split(")")[0].split(",");var a=values[0];var b=values[1];angle=Math.round(Math.atan2(b,a)*(180/Math.PI))}else{angle=0}return angle};Lavender.MatrixUtils.getRotationAngle=function(matrix){return Lavender.MathUtils.toFixed(Lavender.MathUtils.radianToDegree(Math.atan2(matrix.b,matrix.a)))};Lavender.MatrixUtils.getMatrix=function(cssTransformMatrix){var values=cssTransformMatrix.split("(")[1];values=values.split(")")[0];values=values.split(",");var a=values[0];var b=values[1];var c=values[2];var d=values[3];return Matrix(a,b,c,d)};Lavender.BrowserUtils=function(){};Lavender.BrowserUtils.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(ipad).*(?:safari)[ \/]([\w.]+)/.exec(ua)||/(chrome)[ \/]([\w.]+)/.exec(ua)||/(safari)[ \/]([\w.]+)/.exec(ua)||/(firefox)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};Lavender.BrowserUtils.getBrowser=function(){return Lavender.BrowserUtils.uaMatch(navigator.userAgent)};Lavender.StringUtil=function(){};Lavender.StringUtil.substitute=function(str,rest){if(str===null){return""}var len=rest.length;var args=[];if(len==1&&rest[0]instanceof Array){args=rest[0];len=args.length}else{args=rest}for(var i=0;i<len;i++){str=str.replace(new RegExp("\\{"+i+"\\}","g"),args[i])}return str};Lavender.StringUtil.compressSpaces=function(str){return str.replace(/[\s\r\t\n]+/gm," ")};Lavender.StringUtil.trim=function(str){if(str==null)return"";var startIndex=0;while(Lavender.StringUtil.isWhitespace(str.charAt(startIndex)))++startIndex;var endIndex=str.length-1;while(Lavender.StringUtil.isWhitespace(str.charAt(endIndex)))--endIndex;if(endIndex>=startIndex)return str.slice(startIndex,endIndex+1);else return""};Lavender.StringUtil.isWhitespace=function(character){switch(character){case" ":case"	":case"\r":case"\n":case"\f":return true;default:return false}};Lavender.StringUtil.convertCharCodesToString=function(codes){var charArray=codes.split("_");var returnValue=new String;for(var i=1;i<charArray.length;i++){returnValue+=String.fromCharCode(charArray[i])}return returnValue};Lavender.StringUtil.convertStringToCharCodes=function(string){var returnValue=new String;for(var i=0;i<string.length;i++){returnValue+=Lavender.StringUtil.fixedCharCodeAt(string,i)+"_"}if(returnValue.length>0){returnValue=returnValue.substring(0,returnValue.length-1)}return"spi_"+returnValue};Lavender.StringUtil.fixedCharCodeAt=function(str,idx){idx=idx||0;var code=str.charCodeAt(idx);var hi,low;if(55296<=code&&code<=56319){hi=code;low=str.charCodeAt(idx+1);if(isNaN(low)){throw new Error("Lavender.StringUtil.fixedCharCodeAt: High surrogate not followed by low surrogate in fixedCharCodeAt()")}return(hi-55296)*1024+(low-56320)+65536}if(56320<=code&&code<=57343){return false}return code};Lavender.ColorUtils=function(){};Lavender.ColorUtils.rgb2hex=function(rgb){rgb=rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(rgb[1],10).toString(16)).slice(-2)+("0"+parseInt(rgb[2],10).toString(16)).slice(-2)+("0"+parseInt(rgb[3],10).toString(16)).slice(-2)};Lavender.URLUtils=function(){};Lavender.URLUtils.getQuerystring=function(location,key,defaultValue){key=key.toLowerCase();if(defaultValue===null||defaultValue===undefined){defaultValue=""}key=key.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+key+"=([^&#]*)");var qs=regex.exec(location.toLowerCase());if(qs==null){return defaultValue}else{return qs[1]}};Lavender.CoordsUtils=function(){};Lavender.CoordsUtils.globalToLocal=function(container,pageX,pageY){var position=container.offset();return{x:pageX-position.left,y:pageY-position.top}};Lavender.CoordsUtils.localToGlobal=function(context,localX,localY){var position=context.offset();return{x:localX+position.left,y:localY+position.top}};Lavender.Geometry=function(values){this.left=undefined;this.top=undefined;this.width=undefined;this.height=undefined;this.update(values)};Lavender.Geometry.prototype.update=function(values){if(!values){return}for(var key in values){if(Lavender.ObjectUtils.isPropDefined(values,key)&&this.hasOwnProperty(key)){this[key]=values[key]}}};Lavender.Geometry.prototype.getDefinedValues=function(){var res={};for(var key in this){if(Lavender.ObjectUtils.isPropDefined(this,key)){res[key]=this[key]}}return res};Lavender.XmlUtils=function(){};Lavender.XmlUtils.getXmlStringFromElement=function(element){var xmlString;if(window.XMLSerializer){xmlString=(new XMLSerializer).serializeToString(element[0])}else if(window.ActiveXObject){xmlString=element[0].xml}return xmlString};Lavender.ResizeUtils=function(){};Lavender.ResizeUtils.getScaleToFill=function(objSize,sizeToFill){var scale=sizeToFill.height/sizeToFill.width>objSize.height/objSize.width?sizeToFill.height/objSize.height:sizeToFill.width/objSize.width;return scale};Lavender.ResizeUtils.getScaleToFit=function(objSize,sizeToFit){return Math.min(sizeToFit.width/objSize.width,sizeToFit.height/objSize.height)};Lavender.AbstractEvent=function(eventType,payload){this.type=eventType;this.payload=payload};Lavender.ActionErrorEvent=function(eventType,payload){if(payload.message===null||payload.message===undefined){throw new Error("Lavender.ActionErrorEvent: payload.message is required")}Lavender.AbstractEvent.call(this,eventType,payload)};Lavender.ObjectUtils.extend(Lavender.AbstractEvent,Lavender.ActionErrorEvent);Lavender.ActionErrorEvent.prototype.clone=function(){return new Lavender.ActionErrorEvent(this.type,this.payload)};Lavender.ActionErrorEvent.ERROR="actionError";Lavender.CollectionEvent=function(eventType,payload){Lavender.AbstractEvent.call(this,eventType,payload)};Lavender.ObjectUtils.extend(Lavender.AbstractEvent,Lavender.CollectionEvent);Lavender.CollectionEvent.prototype.clone=function(){return new Lavender.CollectionEvent(this.type,this.payload)};Lavender.CollectionEvent.COLLECTION_CHANGE="collectionChange";Lavender.RecordSetEvent=function(eventType,payload){Lavender.AbstractEvent.call(this,eventType,payload)};Lavender.ObjectUtils.extend(Lavender.AbstractEvent,Lavender.RecordSetEvent);Lavender.RecordSetEvent.prototype.clone=function(){return new Lavender.RecordSetEvent(this.type,this.payload)};Lavender.RecordSetEvent.TOTALRECORDS_CHANGE="totalRecordsChange";Lavender.RecordSetEvent.TOTALPAGES_CHANGE="totalPagesChange";Lavender.RecordSetEvent.PAGE_LIST_CHANGE="pageListChange";Lavender.RecordSetEvent.RESULTS_CHANGE="resultsChange";Lavender.RecordSetEvent.RECORDS_PER_PAGE_CHANGE="recordsPerPageChange";Lavender.RecordSetEvent.SELECTED_PAGE_CHANGE="selectedPageChange";Lavender.RecordSetEvent.RECORDSETS_CHANGE="recordsetChange";Lavender.RecordSetEvent.LOAD_PAGE_DATA="loadRecordSetPageData";Lavender.AbstractEventDispatcher=function(){this.handlersByEventName={}};Lavender.AbstractEventDispatcher.prototype.addEventListener=function(event,instance,handler,proxy,removeListenerFunction){if(this.handlersByEventName[event]===null||this.handlersByEventName[event]===undefined){this.handlersByEventName[event]=[]}this.handlersByEventName[event].push({handler:handler,instance:instance,proxy:proxy,removeListenerFunction:removeListenerFunction})};Lavender.AbstractEventDispatcher.prototype.canListen=function(eventType,instance,handler){var canListen=false;if(this.handlersByEventName[eventType]!==null&&this.handlersByEventName[eventType]!==undefined){for(var handlerIndex=0;handlerIndex<this.handlersByEventName[eventType].length;handlerIndex++){var handlerFunctionName=this.handlersByEventName[eventType][handlerIndex].handler;var objectInstance=this.handlersByEventName[eventType][handlerIndex].instance;if(handlerFunctionName==handler&&objectInstance==instance){canListen=true;break}}}return canListen};Lavender.AbstractEventDispatcher.prototype.removeEventListener=function(event,instance,handler){if(this.handlersByEventName[event]===null||this.handlersByEventName[event]===undefined){return}for(var handlerIndex=0;handlerIndex<this.handlersByEventName[event].length;handlerIndex++){if(this.handlersByEventName[event][handlerIndex].instance==instance&&this.handlersByEventName[event][handlerIndex].handler==handler){var itemToRemove=this.handlersByEventName[event][handlerIndex];switch(handlerIndex){case 0:this.handlersByEventName[event].shift();break;case this.handlersByEventName[event].length-1:this.handlersByEventName[event].pop();break;default:var head=this.handlersByEventName[event].slice(0,handlerIndex);var tail=this.handlersByEventName[event].slice(handlerIndex+1);this.handlersByEventName[event]=head.concat(tail);break}return itemToRemove}}};Lavender.AbstractEventDispatcher.prototype.removeAllEventListeners=function(instance){for(var event in this.handlersByEventName){for(var handlerIndex=this.handlersByEventName[event].length-1;handlerIndex>=0;handlerIndex--){if(this.handlersByEventName[event][handlerIndex].instance==instance){this.removeEventListener(event,instance,this.handlersByEventName[event][handlerIndex].handler)}}}};Lavender.AbstractEventDispatcher.prototype.dispatch=function(event){if(this.handlersByEventName[event.type]===null||this.handlersByEventName[event.type]===undefined){return}var dispatchToList=this.handlersByEventName[event.type].slice();var len=dispatchToList.length;for(var handlerIndex=0;handlerIndex<len;++handlerIndex){var handlerFunctionName=dispatchToList[handlerIndex].handler;var instance=dispatchToList[handlerIndex].instance;instance[handlerFunctionName](event)}};Lavender.JqueryEventDispatcher=function(){Lavender.AbstractEventDispatcher.prototype.constructor.call(this);this.dispatcher=$(this)};Lavender.ObjectUtils.extend(Lavender.AbstractEventDispatcher,Lavender.JqueryEventDispatcher);Lavender.JqueryEventDispatcher.prototype.addEventListener=function(event,instance,handler){var proxy=jQuery.proxy(instance[handler],instance);this.dispatcher.on(event,proxy);Lavender.AbstractEventDispatcher.prototype.addEventListener.call(this,event,instance,handler,proxy)};Lavender.JqueryEventDispatcher.prototype.removeEventListener=function(event,instance,handler){var removedItem=Lavender.AbstractEventDispatcher.prototype.removeEventListener.call(this,event,instance,handler);this.dispatcher.off(event,removedItem.proxy)};Lavender.JqueryEventDispatcher.prototype.removeAllEventListeners=function(instance){for(var event in this.handlersByEventName){for(var handlerIndex=this.handlersByEventName[event].length-1;handlerIndex>=0;handlerIndex--){if(this.handlersByEventName[event][handlerIndex].instance==instance){var item=this.handlersByEventName[event][handlerIndex];this.dispatcher.off(item.event,item.proxy)}}}Lavender.AbstractEventDispatcher.prototype.removeAllEventListeners.call(this,instance)};Lavender.JqueryEventDispatcher.prototype.dispatch=function(event){this.dispatcher.trigger(event)};Lavender.AngularEventDispatcher=function(rootScope){Lavender.AbstractEventDispatcher.prototype.constructor.call(this);this.dispatcher=rootScope};Lavender.ObjectUtils.extend(Lavender.AbstractEventDispatcher,Lavender.AngularEventDispatcher);Lavender.AngularEventDispatcher.prototype.addEventListener=function(event,instance,handler){var proxy=jQuery.proxy(instance[handler],instance);var removeListenerFunction=this.dispatcher.$on(event,proxy);Lavender.AbstractEventDispatcher.prototype.addEventListener.call(this,event,instance,handler,proxy,removeListenerFunction)};Lavender.AngularEventDispatcher.prototype.removeEventListener=function(event,instance,handler){var removedItem=Lavender.AbstractEventDispatcher.prototype.removeEventListener.call(this,event,instance,handler);removedItem.removeListenerFunction()};Lavender.AngularEventDispatcher.prototype.removeAllEventListeners=function(instance){for(var event in this.handlersByEventName){for(var handlerIndex=this.handlersByEventName[event].length-1;handlerIndex>=0;handlerIndex--){if(this.handlersByEventName[event][handlerIndex].instance==instance){var item=this.handlersByEventName[event][handlerIndex];item.removeListenerFunction()}}}Lavender.AbstractEventDispatcher.prototype.removeAllEventListeners.call(this,instance)};Lavender.AngularEventDispatcher.prototype.dispatch=function(event){this.dispatcher.$broadcast(event.type,event)};Lavender.ArrayList=function(source){if(source===null||source===undefined){source=[]}this.aList=source;Lavender.Subject.prototype.constructor.call(this);Lavender.ObjectUtils.mixin(Lavender.AbstractEventDispatcher,Lavender.ArrayList,this)};Lavender.ObjectUtils.extend(Lavender.Subject,Lavender.ArrayList);Lavender.ArrayList.prototype.length=function(){return this.aList.length};Lavender.ArrayList.prototype.clone=function(){return new Lavender.ArrayList(this.aList.slice())};Lavender.ArrayList.prototype.source=function(){return this.aList};Lavender.ArrayList.prototype.validateItem=function(object){};Lavender.ArrayList.prototype.addItem=function(object){this.validateItem(object);var index=this.aList.push(object);this.dispatch(new Lavender.CollectionEvent(Lavender.CollectionEvent.COLLECTION_CHANGE,null));return index};Lavender.ArrayList.prototype.addAll=function(items){for(var i=0;i<items.length;i++){if(items[i].hasOwnProperty("addItemAt")&&!isNaN(items[i].addItemAt)){this.insert(items[i].item,items[i].addItemAt,true)}else{this.addItem(items[i])}}this.dispatch(new Lavender.CollectionEvent(Lavender.CollectionEvent.COLLECTION_CHANGE,null))};Lavender.ArrayList.prototype.getItemAt=function(index){if(index>-1&&index<this.aList.length)return this.aList[index];else return undefined};Lavender.ArrayList.prototype.clear=function(){this.aList=[];this.dispatch(new Lavender.CollectionEvent(Lavender.CollectionEvent.COLLECTION_CHANGE,null))};Lavender.ArrayList.prototype.clearHash=function(hash){for(var prop in hash){hash[prop]=null;delete hash[prop]}};Lavender.ArrayList.prototype.removeItemFromHash=function(hash,key){hash[key]=null;delete hash[key]};Lavender.ArrayList.prototype.removeItemAt=function(index){var m_count=this.aList.length;if(m_count>0&&index>-1&&index<this.aList.length){switch(index){case 0:this.aList.shift();break;case m_count-1:this.aList.pop();break;default:var head=this.aList.slice(0,index);var tail=this.aList.slice(index+1);this.aList=head.concat(tail);break}}this.dispatch(new Lavender.CollectionEvent(Lavender.CollectionEvent.COLLECTION_CHANGE,null))};Lavender.ArrayList.prototype.insert=function(object,index,suppressChangeEvent){this.validateItem(object);if(suppressChangeEvent===null||suppressChangeEvent===undefined){suppressChangeEvent=false}var m_count=this.aList.length;var m_returnValue=-1;if(index>-1){switch(index){case 0:this.aList.unshift(object);m_returnValue=0;break;case m_count:this.aList.push(object);m_returnValue=m_count;break;default:if(index>m_count){for(var i=0;i<index-m_count;i++){this.aList.push(null)}}var head=this.aList.slice(0,index);var tail=this.aList.slice(index);tail.unshift(object);this.aList=head.concat(tail);m_returnValue=index;break}}if(!suppressChangeEvent){this.dispatch(new Lavender.CollectionEvent(Lavender.CollectionEvent.COLLECTION_CHANGE,null))}return m_returnValue};Lavender.ArrayList.prototype.indexOf=function(object,startIndex){if(startIndex===null||startIndex===undefined){startIndex=0}var m_count=this.aList.length;var m_returnValue=-1;if(startIndex>-1&&startIndex<m_count){var i=startIndex;while(i<m_count){if(this.aList[i]==object){m_returnValue=i;break}i++}}return m_returnValue};Lavender.ArrayList.prototype.lastIndexOf=function(object,startIndex){var m_count=this.aList.length;var m_returnValue=-1;if(startIndex>-1&&startIndex<m_count){var i=m_count-1;while(i>=startIndex){if(this.aList[i]==object){m_returnValue=i;break}i--}}return m_returnValue};Lavender.Config=function(){var _eventDispatcherCode="abstract";var _baseUrl;var _sessionId;var _serviceCode;var _httpServiceCode="jquery";var _webRoot="";var _parserCode=undefined;var _exporterCode=undefined;Lavender.Subject.prototype.constructor.call(this);this.addProperties({serviceCode:{get:function(){return _serviceCode},set:function(val){_serviceCode=val;this.Notify(val,"serviceCode")}},exporterCode:{get:function(){return _exporterCode},set:function(val){_exporterCode=val;this.Notify(val,"exporterCode")}},parserCode:{get:function(){return _parserCode},set:function(val){_parserCode=val;this.Notify(val,"parserCode")}},webRoot:{get:function(){return _webRoot},set:function(val){_webRoot=val;this.Notify(val,"webRoot")}},httpServiceCode:{get:function(){return _httpServiceCode},set:function(val){_httpServiceCode=val;this.Notify(val,"httpServiceCode")}},sessionId:{get:function(){return _sessionId},set:function(val){_sessionId=val;this.Notify(val,"sessionId")}},baseUrl:{get:function(){return _baseUrl},set:function(val){_baseUrl=val;this.Notify(val,"baseUrl")}},eventDispatcherCode:{get:function(){return _eventDispatcherCode},set:function(val){_eventDispatcherCode=val;this.Notify(val,"eventDispatcherCode")}}})};Lavender.ObjectUtils.extend(Lavender.Subject,Lavender.Config);Lavender.AsyncOperationModel=function(){var _asyncOperationCount=0;var _asyncOperationComplete=true;Lavender.Subject.prototype.constructor.call(this);this.addProperties({asyncOperationCount:{get:function(){return _asyncOperationCount},set:function(val){_asyncOperationCount=val;this.Notify(val,"asyncOperationCount")}},asyncOperationComplete:{get:function(){return this.asyncOperationCount<=0},set:function(val){_asyncOperationComplete=val;this.Notify(val,"asyncOperationComplete")}}})};Lavender.ObjectUtils.extend(Lavender.Subject,Lavender.AsyncOperationModel);Lavender.AsyncOperationModel.prototype.addAsyncOperation=function(){this.asyncOperationComplete=false;this.asyncOperationCount+=1};Lavender.AsyncOperationModel.prototype.removeAsyncOperation=function(){this.asyncOperationCount-=1;if(!this.asyncOperationCount){this.asyncOperationComplete=true}};Lavender.ErrorModel=function(){var _appError=false;var _errors=new Lavender.ArrayList;Lavender.Subject.prototype.constructor.call(this);this.addProperties({appError:{get:function(){return _appError},set:function(val){_appError=val;this.Notify(val,"appError")}},errors:{get:function(){return _errors},set:function(val){_errors=val;this.Notify(val,"errors")}}})};Lavender.ObjectUtils.extend(Lavender.Subject,Lavender.ErrorModel);Lavender.ErrorModel.prototype.getTitle=function(){var returnTitle=this.errors.length()>1?"Multiple errors have occurred.\n":"The following error occurred.\n";return returnTitle};Lavender.ErrorModel.prototype.getMessage=function(){var returnText="";for(var errorIndex=0;errorIndex<this.errors.length();errorIndex++){returnText+="Name: "+this.errors.getItemAt(errorIndex).name+"\n";returnText+="Message: "+this.errors.getItemAt(errorIndex).message+"\n";returnText+="\n"}return returnText};Lavender.ErrorModel.prototype.addError=function(error){this.errors.addItem(error);this.appError=true};Lavender.ErrorModel.prototype.clear=function(){this.errors.clear();this.appError=false};Lavender.ModelLocator=function(){if(Lavender.ModelLocator.instance!=null){throw"Singleton class has already been instantiated"}else{Lavender.Subject.prototype.constructor.call(this);Lavender.ModelLocator.instance=this;var _config=new Lavender.Config;var _errorModel=new Lavender.ErrorModel;var _asyncOperationModel=new Lavender.AsyncOperationModel;var _recordsetModel=new Lavender.RecordSetModel;this.addProperties({recordsetModel:{get:function(){return _recordsetModel},set:function(val){_recordsetModel=val;this.Notify(val,"recordsetModel")}},config:{get:function(){return _config},set:function(val){_config=val;this.Notify(val,"config")}},errorModel:{get:function(){return _errorModel},set:function(val){_errorModel=val;this.Notify(val,"errorModel")}},asyncOperationModel:{get:function(){return _asyncOperationModel},set:function(val){_asyncOperationModel=val;this.Notify(val,"asyncOperationModel")}}})}};Lavender.ObjectUtils.extend(Lavender.Subject,Lavender.ModelLocator);Lavender.ModelLocator.getInstance=function(){if(Lavender.ModelLocator.instance==null){Lavender.ModelLocator.instance=new Lavender.ModelLocator}return Lavender.ModelLocator.instance};Lavender.ModelLocator.instance=null;Lavender.RecordSet=function(timeToLive){if(timeToLive===null||timeToLive===undefined){timeToLive=6e5}var _id;var _totalRecords;var _totalPages;var _selectedPage;var _recordsPerPage;var _results=new Lavender.ArrayList;var _pageList=new Lavender.ArrayList;var _createdOn;var _timeToLive;var _source;this.resultsByPage={};this.cacheTimer=undefined;this.intervalId=setTimeout(this.clear,timeToLive);_results.addEventListener(Lavender.CollectionEvent.COLLECTION_CHANGE,this,"resultCollectionChanged");Lavender.Subject.prototype.constructor.call(this);Lavender.ObjectUtils.mixin(Lavender.AbstractEventDispatcher,Lavender.RecordSet,this);this.addProperties({source:{get:function(){return _source},set:function(val){_source=val;this.Notify(val,"source")}},timeToLive:{get:function(){return _timeToLive},set:function(val){_timeToLive=val;if(this.intervalId!==null&&this.intervalId!==undefined){clearInterval(this.intervalId);this.intervalId=setTimeout(this.clear,val)}this.Notify(val,"timeToLive")}},createdOn:{get:function(){return _createdOn},set:function(val){_createdOn=val;this.Notify(val,"createdOn")}},pageList:{get:function(){return _pageList},set:function(val){_pageList=val;
this.Notify(val,"pageList");this.dispatch(new Lavender.RecordSetEvent(Lavender.RecordSetEvent.PAGE_LIST_CHANGE))}},results:{get:function(){return _results},set:function(val){if(_results!=val){if(_results!==null&&_results!==undefined){_results.removeEventListener(Lavender.CollectionEvent.COLLECTION_CHANGE,this,"resultCollectionChanged")}_results=val;this.renewState();this.selectedPage=1;_results.addEventListener(Lavender.CollectionEvent.COLLECTION_CHANGE,this,"resultCollectionChanged");this.Notify(val,"results");this.dispatch(new Lavender.RecordSetEvent(Lavender.RecordSetEvent.RESULTS_CHANGE))}}},recordsPerPage:{get:function(){return _recordsPerPage},set:function(val){if(_recordsPerPage!=val){_recordsPerPage=val;this.renewState();this.Notify(val,"recordsPerPage");this.dispatch(new Lavender.RecordSetEvent(Lavender.RecordSetEvent.RECORDS_PER_PAGE_CHANGE))}}},selectedPage:{get:function(){return _selectedPage},set:function(val){if(_selectedPage!=val){if(!this.pageLoaded(val)){this.dispatch(new Lavender.RecordSetEvent(Lavender.RecordSetEvent.LOAD_PAGE_DATA,{recordSet:this}))}_selectedPage=val;this.calculatePageList();this.Notify(val,"selectedPage");this.dispatch(new Lavender.RecordSetEvent(Lavender.RecordSetEvent.SELECTED_PAGE_CHANGE))}}},totalPages:{get:function(){return _totalPages},set:function(val){if(_totalPages!=val){_totalPages=val;this.Notify(val,"totalPages");this.dispatch(new Lavender.RecordSetEvent(Lavender.RecordSetEvent.TOTALPAGES_CHANGE))}}},totalRecords:{get:function(){return _totalRecords},set:function(val){if(_totalRecords!=val){_totalRecords=val;this.Notify(val,"totalRecords");this.dispatch(new Lavender.RecordSetEvent(Lavender.RecordSetEvent.TOTALRECORDS_CHANGE))}}},id:{get:function(){return _id},set:function(val){_id=val;this.Notify(val,"id")}}})};Lavender.ObjectUtils.extend(Lavender.Subject,Lavender.RecordSet);Lavender.RecordSet.prototype.calculatePageList=function(){this.pageList=this.resultsByPage[this.selectedPage]};Lavender.RecordSet.prototype.pageLoaded=function(pageNumber){return this.resultsByPage[pageNumber]!==null&&this.resultsByPage[pageNumber]!==undefined};Lavender.RecordSet.prototype.clear=function(){if(this.results!==undefined&&this.results!==null){this.results.clear()}this.totalRecords=0;this.totalPages=0;this.selectedPage=-1};Lavender.RecordSet.prototype.renewState=function(){this.totalPages=Math.ceil(this.results.length()/this.recordsPerPage);this.resultsByPage={};for(var pageIndex=1;pageIndex<=this.totalPages;pageIndex++){var first=(pageIndex-1)*this.recordsPerPage;var endOfResults=false;var last=first+this.recordsPerPage>this.totalRecords?this.totalRecords:first+this.recordsPerPage;if(last>this.results.length()){last=this.results.length()}var dp=new Lavender.ArrayList;if(this.results!==null&&this.results!==undefined){for(var i=first;i<last;i++){if(this.results.getItemAt(i)===null||this.results.getItemAt(i)===undefined){continue}dp.addItem(this.results.getItemAt(i))}}if(dp.length()>0){this.resultsByPage[pageIndex]=dp}}this.calculatePageList();this.dispatch(new Lavender.RecordSetEvent(Lavender.RecordSetEvent.RESULTS_CHANGE))};Lavender.RecordSet.prototype.resultCollectionChanged=function(event){this.renewState()};Lavender.RecordSet.prototype.destroy=function(){clearInterval(this.intervalId);this.results=null;this.pageList=null;this.resultsByPage=null;this.cacheTimer=null};Lavender.RecordSet.USER_UPLOAD="userUpload";Lavender.RecordSet.FOTOLIA="fotolia";Lavender.RecordSet.FACEBOOK="facebook";Lavender.RecordSetList=function(){this.recordSetsBySource={};this.recordSetsById={};Lavender.ArrayList.prototype.constructor.call(this)};Lavender.ObjectUtils.extend(Lavender.ArrayList,Lavender.RecordSetList);Lavender.RecordSetList.prototype.addItem=function(object){this.recordSetsById[object.id]=object;this.recordSetsBySource[object.source]=object;return Lavender.ArrayList.prototype.addItem.call(this,object)};Lavender.RecordSetList.prototype.clear=function(){Lavender.ArrayList.prototype.clearHash.call(this,this.recordSetsById);Lavender.ArrayList.prototype.clearHash.call(this,this.recordSetsBySource);Lavender.ArrayList.prototype.clear.call(this)};Lavender.RecordSetList.prototype.removeItemAt=function(index){var recordSet=this.getItemAt(index);Lavender.ArrayList.prototype.removeItemFromHash.call(this,this.recordSetsById,recordSet.id);Lavender.ArrayList.prototype.removeItemFromHash.call(this,this.recordSetsBySource,recordSet.source);Lavender.ArrayList.prototype.removeItemAt.call(this,index)};Lavender.RecordSetList.prototype.insert=function(object,index){this.recordSetsById[object.id]=object;this.recordSetsBySource[object.source]=object;Lavender.ArrayList.prototype.insert.call(this,object,index)};Lavender.RecordSetModel=function(){var _recordSets=new Lavender.RecordSetList;Lavender.Subject.prototype.constructor.call(this);Lavender.ObjectUtils.mixin(Lavender.AbstractEventDispatcher,Lavender.RecordSetModel,this);this.addProperties({recordSets:{get:function(){return _recordSets},set:function(val){_recordSets=val;this.Notify(val,"recordSets");this.dispatch(new Lavender.RecordSetEvent(Lavender.RecordSetEvent.RECORDSETS_CHANGE))}}})};Lavender.ObjectUtils.extend(Lavender.Subject,Lavender.RecordSetModel);Lavender.HttpFault=function(errorObj,status,message,requestId){if(errorObj===null||errorObj===undefined){throw new Error("errorObj is required")}if(status===null||status===undefined){throw new Error("status is required")}if(message===null||message===undefined){throw new Error("message is required")}this.errorObj=errorObj;this.status=status;this.message=message;this.requestId=requestId};Lavender.HttpSuccess=function(resultObj,status,requestId){if(resultObj===null||resultObj===undefined){throw new Error("resultObj is required")}if(status===null||status===undefined){throw new Error("status is required")}this.resultObj=resultObj;this.status=status;this.requestId=requestId};Lavender.AbstractHttpService=function(){this.responders=new Lavender.ArrayList;this.requestId=undefined};Lavender.AbstractHttpService.prototype.addResponder=function(responder){if(responder.fault===null||responder.fault===undefined||responder.success===null||responder.success===undefined){throw new Error("responder must define fault and success methods")}this.responders.addItem(responder)};Lavender.AbstractHttpService.prototype.success=function(result){};Lavender.AbstractHttpService.prototype.fault=function(fault){};Lavender.AbstractHttpService.prototype.send=function(requestObject){this.requestId=Math.random();return this.requestId};Lavender.AbstractHttpService.prototype.destroy=function(){this.responders.clear();this.responders=null};Lavender.JqueryHttpService=function(){Lavender.AbstractHttpService.prototype.constructor.call(this);this.requestObj={type:undefined,url:undefined,data:undefined,contentType:undefined,dataType:undefined,cache:false,error:this.fault,success:this.success,context:this}};Lavender.ObjectUtils.extend(Lavender.AbstractHttpService,Lavender.JqueryHttpService);Lavender.JqueryHttpService.prototype.success=function(data,textStatus,jqXHR){var resultStatus=$(data).find("result").attr("status");if(resultStatus!="0"){this.fault(data,textStatus,"An error occured on the server");return}var sucessObj=new Lavender.HttpSuccess(data,textStatus,this.requestId);for(var responderIndex=0;responderIndex<this.responders.length();responderIndex++){var responder=this.responders.getItemAt(responderIndex);responder.success(sucessObj)}};Lavender.JqueryHttpService.prototype.fault=function(jqXHR,textStatus,errorThrown){var errorObj=new Lavender.HttpFault(jqXHR,textStatus,errorThrown,this.requestId);for(var responderIndex=0;responderIndex<this.responders.length();responderIndex++){var responder=this.responders.getItemAt(responderIndex);responder.fault(errorObj)}};Lavender.JqueryHttpService.prototype.send=function(type,url,data,contentType,dataType,cache){this.requestObj.type=type;this.requestObj.url=url;this.requestObj.data=data;this.requestObj.contentType=contentType;this.requestObj.dataType=dataType;this.requestObj.cache=cache;$.ajax(this.requestObj);return Lavender.AbstractHttpService.prototype.send.call(this)};Lavender.JqueryHttpService.prototype.destroy=function(){this.requestObj=null;Lavender.AbstractHttpService.prototype.destroy.call(this)};Lavender.AngularHttpService=function(){Lavender.AbstractHttpService.prototype.constructor.call(this);var $injector=angular.injector(["ng"]);this.http=$injector.get("$http");this.requestObject={method:undefined,url:undefined,params:undefined,data:undefined,headers:undefined,xsrfHeaderName:undefined,xsrfCookieName:undefined,transformRequest:undefined,cache:false,timeout:6e4,withCredentials:false,responseType:undefined}};Lavender.ObjectUtils.extend(Lavender.AbstractHttpService,Lavender.AngularHttpService);Lavender.AngularHttpService.prototype.success=function(data,status,headers,config){var resultStatus=angular.element(data).find("result").attr("status");if(resultStatus!="0"){this.fault(data,status,"An error occured on the server");return}var sucessObj=new Lavender.HttpSuccess(angular.element(data),status,this.requestId);for(var responderIndex=0;responderIndex<this.responders.length();responderIndex++){var responder=this.responders.getItemAt(responderIndex);responder.success(sucessObj)}};Lavender.AngularHttpService.prototype.fault=function(data,status,headers,config){if(status===null||status===undefined){status="500"}var errorObj=new Lavender.HttpFault(angular.element(data),status,"An Error Occured",this.requestId);for(var responderIndex=0;responderIndex<this.responders.length();responderIndex++){var responder=this.responders.getItemAt(responderIndex);responder.fault(errorObj)}};Lavender.AngularHttpService.prototype.send=function(type,url,data,contentType,dataType,cache){this.requestObject.method=type;this.requestObject.url=url;this.requestObject.data=data;this.requestObject.responseType=contentType;this.requestObject.cache=cache;this.http(this.requestObject).success(angular.bind(this,this.success)).error(angular.bind(this,this.fault));return Lavender.AbstractHttpService.prototype.send.call(this)};Lavender.AngularHttpService.prototype.destroy=function(){Lavender.AbstractHttpService.prototype.destroy.call(this)};Lavender.AbstractServiceAction=function(service,opModel,parser,errorModel){this.service=service;this.opModel=opModel;this.parser=parser;this.errorModel=errorModel;Lavender.Subject.prototype.constructor.call(this);Lavender.ObjectUtils.mixin(Lavender.AbstractEventDispatcher,Lavender.AbstractServiceAction,this)};Lavender.ObjectUtils.extend(Lavender.Subject,Lavender.AbstractServiceAction);Lavender.AbstractServiceAction.prototype.execute=function(){if(this.service===null||this.service===undefined||this.opModel===null||this.opModel===undefined||this.parser===null||this.parser===undefined){this.executionError()}this.opModel.asyncOperationComplete=false;this.opModel.asyncOperationCount+=1;return this.executeDAOMethod()};Lavender.AbstractServiceAction.prototype.parseResponse=function(result){return result};Lavender.AbstractServiceAction.prototype.executeDAOMethod=function(){return null};Lavender.AbstractServiceAction.prototype.dispatchSuccess=function(parsedResult){var doneEvent=new Lavender.ActionSuccessEvent(Lavender.ActionSuccessEvent.SUCCESS,{result:parsedResult});this.dispatch(doneEvent)};Lavender.AbstractServiceAction.prototype.success=function(result){try{var parsedResult=this.parseResponse(result);this.dispatchSuccess(parsedResult)}catch(e){var errorMessage=this.getErrorMessage()+"\n"+e.message+"\n"+e.stack;var errorEvent=new Lavender.ActionErrorEvent(Lavender.ActionErrorEvent.ERROR,{message:errorMessage});this.dispatch(errorEvent);var error={name:"error",message:errorMessage};this.errorModel.errors.addItem(error);this.errorModel.appError=true}finally{this.opModel.asyncOperationCount-=1;if(this.opModel.asyncOperationCount==0){this.opModel.asyncOperationComplete=true}this.tearDown()}};Lavender.AbstractServiceAction.prototype.fault=function(fault){this.opModel.asyncOperationCount-=1;if(this.opModel.asyncOperationCount==0){this.opModel.asyncOperationComplete=true}var errorMessage=this.getFaultString()+fault.message;var errorEvent=new Lavender.ActionErrorEvent(Lavender.ActionErrorEvent.ERROR,{message:errorMessage});this.dispatch(errorEvent);var error={name:fault.status,message:errorMessage};this.errorModel.errors.addItem(error);this.errorModel.appError=true;this.tearDown()};Lavender.AbstractServiceAction.prototype.getFaultString=function(){return null};Lavender.AbstractServiceAction.prototype.getErrorMessage=function(){return null};Lavender.AbstractServiceAction.prototype.executionError=function(){var msg=this.getExecErrorString();if(this.service===null||this.service===undefined){msg+=" service"}if(this.opModel===null||this.opModel){msg+=", opModel"}if(this.parser===null||this.parser===undefined){msg+=", parser"}msg+=".";throw new Error(msg)};Lavender.AbstractServiceAction.prototype.getExecErrorString=function(msg){return"Lavender.AbstractServiceAction.prototype.executionError: the following are required: "};Lavender.AbstractServiceAction.prototype.tearDown=function(){this.opModel=null;this.service=null;this.parser=null};Lavender.AbstractSynchronousAction=function(errorModel){this.errorModel=errorModel;Lavender.Subject.prototype.constructor.call(this);Lavender.ObjectUtils.mixin(Lavender.AbstractEventDispatcher,Lavender.AbstractSynchronousAction,this)};Lavender.ObjectUtils.extend(Lavender.Subject,Lavender.AbstractSynchronousAction);Lavender.AbstractSynchronousAction.prototype.execute=function(){try{this.executeDAOMethod();this.dispatchSuccess(this.getResultObj())}catch(e){var errorMessage=this.getErrorMessage()+"\n"+e.message+"\n"+e.stack;var errorEvent=new Lavender.ActionErrorEvent(Lavender.ActionErrorEvent.ERROR,{message:errorMessage});this.dispatch(errorEvent);var error={name:"error",message:errorMessage};this.errorModel.errors.addItem(error);this.errorModel.appError=true}finally{this.tearDown()}};Lavender.AbstractSynchronousAction.prototype.getResultObj=function(result){return{}};Lavender.AbstractSynchronousAction.prototype.dispatchSuccess=function(result){var doneEvent=new Lavender.ActionSuccessEvent(Lavender.ActionSuccessEvent.SUCCESS,{result:result});this.dispatch(doneEvent)};Lavender.AbstractSynchronousAction.prototype.executeDAOMethod=function(){};Lavender.AbstractSynchronousAction.prototype.getErrorMessage=function(){return null};Lavender.AbstractSynchronousAction.prototype.getExecErrorString=function(msg){return msg};Lavender.AbstractSynchronousAction.prototype.executionError=function(){throw new Error(this.getExecErrorString())};Lavender.AbstractSynchronousAction.prototype.tearDown=function(){this.service=null;this.parser=null};function Lavender(){}
//# sourceMappingURL=/Users/dsmiley/workspace/lavenderJS/minify/lavender.min.js.map